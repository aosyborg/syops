<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SyOps - ${page_title}</title>

    <link rel="stylesheet" type="text/css" href="/public/css/bootstrap-3.1.1.min.css" />
    <link rel="stylesheet" type="text/css" href="/public/css/base.css" />
    <metal:slot define-slot="head" />
</head>
<body>
    <header metal:define-slot="header"></header>

    <div id="wrapper">
        <div id="sidebar">
            <section id="sidebar-user">
                <img src="/public/img/profile-${user_id}.jpg" alt="profile image" />
                <span class="name">Dave Symons</span>
                <div class="popover-content hide">
                    <ul>
                        <li><a href="#">Add organization</a></li>
                        <li><a href="/logout">Logout</a></li>
                    </ul>
                </div>
            </section>

            <section class="projects">
                <h3>Projects</h3>
                <div  tal:repeat="(team_id,team_app) team_apps.items()">
                    <a data-toggle="collapse" data-parent="div" href="#team-${team_id}">
                        <i class="glyphicon glyphicon-globe"></i>
                        ${team_app['name']}
                        <i class="pull-right glyphicon glyphicon-chevron-down"></i>
                    </a>
                    <ul id="team-${team_id}" class="panel-collapse collapse">
                        <li><a href="/teams?id=${team_id}"
                               tal:attributes="class python:'active' if sidebar_active ==
                               'overview-%s' % team_id else ''">Overview</a>
                        </li>
                        <li tal:repeat="(app_id,app_name) python:team_app['apps'].items()">
                            <a href="/apps?id=${app_id}"
                               tal:attributes="class python:'active' if sidebar_active ==
                               'app-%s' % app_id else ''">${app_name}</a>
                        </li>
                    </ul>
                </div>
            </section>

            <section tal:condition="python: user and user.is_admin">
                <h3>Admin:</h3>
                <ul>
                    <li><a href="/admin/teams"
                           tal:attributes="class python:'active' if sidebar_active ==
                           'admin-teams' else ''">Manage teams</a></li>
                    <li><a href="/admin/users"
                           tal:attributes="class python:'active' if sidebar_active ==
                           'admin-users' else ''">Manage users</a></li>
                </ul>
            </section>
        </div>

        <div metal:define-slot="content"></div>
    </div>

    <div metal:define-slot="footer"></div>

    <!-- Confirm modal -->
    <div class="modal fade" id="confirm-modal" roll="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Confirm</h4>
                </div>
                <div class="modal-body">Are you sure?</div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default"
                    data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary"
                    data-dismiss="modal">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add organization modal -->
    <div class="modal fade" id="add-organization" roll="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Add Organization</h4>
                </div>
                <div class="modal-body">
                    <form method="post" action="#" role="form">
                        <input type="hidden" name="team_id" tal:attributes="value team.id" />
                        <div class="form-group">
                            <div class="list-group" id="org-repo-list">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="/public/js/bootstrap-3.1.1.min.js"></script>
    <script src="/public/js/base.js"></script>
    <metal:slot define-slot="javascript" />
</body>
</html>
